<html>
<head>
<!-- This file has been generated by unroff 1.0, 03/01/02 09:13:42. -->
<!-- Do not edit! -->
<STYLE TYPE="text/css">
<!--
        A:link{text-decoration:none}
        A:visited{text-decoration:none}
        A:active{text-decoration:none}
-->
</STYLE>
<title>ploticus: proc bars</title>
<body bgcolor=D0D0EE vlink=0000FF>
<br>
<br>
<center>
<table cellpadding=2 bgcolor=FFFFFF width=550 ><tr>
<td>
  <table cellpadding=2 width=550><tr>
  <td><br><h2>proc bars</h2></td>
  <td align=right>
  <small>
  <a href="../doc/Welcome.html"><img src="../doc/ploticus.gif" border=0></a><br>
  <a href="../doc/Welcome.html">Welcome</a> &nbsp; &nbsp;
  <a href="../gallery/index.html">Gallery</a> &nbsp; &nbsp;
  <a href="../doc/Contents.html">Handbook</a> 
  <td></tr></table>
</td></tr>
<td>
<br>
<br>

<title>Manual page for proc_bars(PL)</title>
</head>
<body>
 
<center>
<img src="../gallery/bars0.gif">
</center>

<h2>DESCRIPTION</h2>
<b>proc bars</b> uses data to draw bargraphs, histograms, error bars,
or segment bars, in 
the vertical or horizontal directions.<tt> </tt>

<br><br><br>
<h2>VERTICAL or HORIZONTAL BARS</h2>
Bars can be vertical or horizontal.  
This is controlled by the <tt>horizontalbars</tt> or <tt>axis</tt> attributes.<tt> </tt>
For the purposes of the descriptions herein, we will 
assume vertical bars.  Everything works essentially
the same way for horizontal bars, except that 
X and Y should be read as reversed in the descriptions.<tt> </tt>

<br><br><br>
<h2>FEATURES</h2>
Stacked bars, clusters of bars, various labeling options, and variable bar width.<tt> </tt>
<p>
<a href="clickmap.html">
 HTML clickmap
</a>
support for the bars.<tt> </tt>

<br><br><br>
<h2>EXAMPLES</h2>
See the Gallery Bars examples
<a href="../gallery/gall.bars.html"><img src="../gallery/btn/here.gif"></a>
and
<a href="../gallery/gall.hbars.html"><img src="../gallery/btn/here.gif"></a>

<br><br><br>
<h2>UNPLOTTABLE DATA</h2>
Invalid data points are omitted.<tt> </tt>
If <tt>truncate</tt> is set to <tt>yes</tt>, then
bars extending beyond the plotting area are truncated to the 
limit of the plotting area;
if both the minima and the maxima of a bar segment or error bar
lie outside of the plotting area, the bar is omitted with a warning.<tt> </tt>

<br><br><br>
<h2>PREREQUISITES</h2>
A plotting area must be set up using <b>proc areadef</b> 
and <b>proc getdata</b> must be executed to 
access or define some data.<tt> </tt>

<br><br><br>
<h2>MODES</h2>
<p>
Bars can be generated from data using one of several modes
(remember to reverse X and Y in these descriptions if doing
horizontal bars):
<p>
<b>Bars "where they fall":</b>  
<dl>
<dt><dd><p>
By specifying <tt>lenfield</tt> but not <tt>locfield</tt>, bars 
are graphed at consecutive unit locations in X.<tt> </tt>
The length of bars is controlled by the plottable values found 
in <tt>lenfield</tt>.<tt> </tt>
</dl>
<p>
<b>Bars at specified locations:</b>
<dl>
<dt><dd><p>
By specifying both <tt>lenfield</tt> and <tt>locfield</tt>,
bars are produced at the X locations found in <tt>locfield</tt>
and the length of bars is controlled by the plottable values found 
in <tt>lenfield</tt>.<tt> </tt>
</dl>
<p>
<b>Bar segments (to show ranges):</b>
<dl>
<dt><dd><p>
By specifying <tt>segmentfields</tt>, bars will be drawn
as segments between two plottable values, to show ranges.<tt> </tt>
This mode may be used with or without <tt>locfield</tt>,
and <tt>lenfield</tt> is not applicable.<tt> </tt>
</dl>
<p>
<b>Error bars:</b>
<dl>
<dt><dd><p>
By specifying <tt>lenfield</tt> and <tt>errbarfields</tt>
error bars centered on the Y values in <tt>lenfield</tt> 
are produced.  
This mode may be used with or without <tt>locfield</tt>.<tt> </tt>
The length of the error bars is 
controlled by the values in the <tt>errbarfields</tt>
(which have presumably been precomputed; use <b>proc rangebar</b>
to caluclate mean/standard deviation and draw bars).<tt> </tt>
The color &amp; style of the error bar line can be
controlled using the <tt>thinbarline</tt> attribute.<tt> </tt>
</dl>
<p>
<b>Stacked and/or clustered bars:</b>
<dl>
<dt><dd><p>
<b>proc bars</b> draws one set of bars per invocation.<tt> </tt>
Stacked and clustered bars may be done using multiple invocations.<tt> </tt>
To do the upper portions of a stacked bargraph, the <tt>stackfields</tt>
attribute controls what data the bars are to be placed above
(stacked bar graphs require that the data be organized such that all components
of a bar be located on the same data row).<tt> </tt>
To do clustered bars, the <tt>cluster</tt> attribute is used.<tt> </tt>
</dl>
<p>
<b>Very thin bars / histograms:</b>
<dl>
<dt><dd><p>
The <tt>thinbarline</tt> attribute should be used when very thin line bars
are desired and to specify style for error bar lines.<tt> </tt>

<br><br><br>
</dl>
<h2>MANDATORY ATTRIBUTE</h2>
The <tt>lenfield</tt> attribute MUST be specified.<tt> </tt>

<br><br><br>
<h2>ATTRIBUTES</h2>
<p>
(Remember to reverse X and Y in these descriptions if
horizontal bars are being generated.)

<p>
<b>lenfield</b> 
<a href="attributetypes.html#dfield">
<i> dfield </i>
</a>
<dl>
<dt><dd><p>
The contents of this data field will be used to control bar length.<tt> </tt>
These should be plottable values in Y. 
Example: <tt>lenfield: 2</tt>

</dl>
<p>
<b>locfield</b> 
<a href="attributetypes.html#dfield">
<i> dfield </i>
</a>
<dl>
<dt><dd><p>
The contents of this data field will be used to control bar location in X.<tt> </tt>
These should be plottable values in X.  
If <tt>locfield</tt> is not specified, bars will be located at consecutive
unit locations in X.<tt> </tt>
Example: <tt>locfield: 1</tt>

</dl>
<p>
<b>horizontalbars</b> <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If yes, bars will be horizontal.<tt> </tt>
Otherwise, bars will be vertical.<tt> </tt>
Example: <tt>horizontalbars: yes</tt>

</dl>
<p>
<b>axis</b> <tt>x</tt> | <tt>y</tt>
<dl>
<dt><dd><p>
Has the same effect as the <tt>horizontalbars</tt> attribute.<tt> </tt>
Specifies the axis that the bar lengths will be plotted against.<tt> </tt>
Use <tt>y</tt> to produce vertical bars (the default),
or <tt>x</tt> to produce horizontal bars.<tt> </tt>
Example: <tt>axis: x</tt>

</dl>
<p>
<b>color</b> 
<a href="color.html">
<i> color </i>
</a>
<dl>
<dt><dd><p>
Color of the bars.  Example: <tt>color: green</tt>
If bars are very thin, or error bars are being done, the
color is specified via the <tt>thinbarline</tt> attribute.<tt> </tt>
The <tt>hatch</tt><i>N</i> color values may be useful when working
in Postscript monochrome.  See also the <tt>colorlist</tt> 
and <tt>colorfield</tt> attributes.<tt> </tt>


</dl>
<p>
<b>legendlabel</b>  
<a href="attributetypes.html#text">
<i> text </i>
</a>
<dl>
<dt><dd><p>
A label to be associated with the current set of bars in the legend.<tt> </tt>
<b>proc legend</b> must be executed later in order to 
render the legend.<tt> </tt>


</dl>
<p>
<b>outline</b> 
<a href="linedetails.html">
<i> linedetails </i>
</a>
<dl>
<dt><dd><p>
If <tt>yes</tt> or a linedetails specification, causes bars to be outlined
with a line.  If <tt>no</tt> or <tt>none</tt>, no outline is produced.<tt> </tt>
Default is <tt>yes</tt>, which gives a thin black outline.<tt> </tt>
<br>
Example: <tt>outline: color=blue</tt>
<br>
Example: <tt>outline: no</tt>

</dl>
<p>
<b>barwidth</b> <i>n</i>
<dl>
<dt><dd><p>
Width of bars in 
<a href="attributetypes.html#positionunits">
absolute units
</a>
 .  If not specified width will be determined based on scaling,
but this may not always be satisfactory.  For very thin bars
use <tt>thinbarline</tt> (see below).<tt> </tt>

</dl>
<p>
<b>thinbarline</b>
<a href="linedetails.html">
<i> linedetails </i>
</a>
 | <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If specified, bars will be rendered as lines with the given properties.<tt> </tt>
<tt>yes</tt> gives a default thin black line.  This should be used when bars are
to be very thin; otherwise, they may not be visible depending on your display
resolution.  This attribute also controls the style, color, etc. of error bars.<tt> </tt>


</dl>
<p>
<b>barsrange</b> <i>min</i> [<i>max</i>]
<dl>
<dt><dd><p>
If specified, and if <tt>locfield</tt> is used to position bars,
bars will only appear if the value in <tt>locfield</tt> is within 
this range.  If only one value is given it is taken as the <b>minima</b>.<tt> </tt>

</dl>
<p>
<b>stackfields</b> <tt>*</tt> 
<br>
<i>or</i>
<br>
<b>stackfields</b> 
<a href="attributetypes.html#dfield">
<i> dfield1 </i>
</a>
 .. <i>dfieldN</i>
<dl>
<dt><dd><p>
If specified, causes current set of bars to be placed on top
of earlier sets.  
If <tt>*</tt> is given, it is taken to mean "stack this set of bars on top of
all previously plotted bars" (same area, same cluster member).<tt> </tt>
Fields may be specified explicitly (see the examples).<tt> </tt>
Max number of stackable fields is 40.  
Stacked bar graphs require that the data be organized such that all components
of a bar be located on the same data row.<tt> </tt>
<br>
Example: <tt>stackfields: *</tt>
<br>
Example: <tt>stackfields: 3 4 5</tt>

</dl>
<p>
<b>cluster</b> <i>position</i> <tt>/</tt> <i>nmembers</i>
<dl>
<dt><dd><p>
If specified, causes the current set of bars to be rendered as a
member of a cluster.  <i>position</i> indicates which member of the
cluster is being done (1 = leftmost).  <i>nmembers</i>
indicates how many bars are in each cluster.<tt> </tt>
<br>
Example: <tt>cluster: 1 / 4</tt>  would be used to render the
first set of bars where clusters of 4 are being done.<tt> </tt>
<dt><dd><p>
You can also say <tt>cluster: 1 of 4</tt> if you prefer.<tt> </tt>

</dl>
<p>
<b>clustersep</b> <i>n</i>
<dl>
<dt><dd><p>
If specified when doing clustered bars, members of each cluster
are separated from each other by <i>n</i> 
<a href="attributetypes.html#positionunits">
absolute units
</a>
  Default is 0.0 (bars butted up against one another).<tt> </tt>

</dl>
<p>
<b>crossover</b> 
<a href="attributetypes.html#plotvalue">
<i> plotvalue </i>
</a>
<dl>
<dt><dd><p>
If specified, causes plottable values less than this to be shown
using bars extending in the opposite direction.  
Typically used for values less than zero.  
Default is no crossover.<tt> </tt>
Example: <tt>crossover: 0</tt>

</dl>
<p>
<b>truncate</b> <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If <tt>yes</tt>, bars and labels will be truncated to the plotting area.<tt> </tt>
Default is <tt>no</tt>.<tt> </tt>

</dl>
<p>
<b>segmentfields</b> 
 [ <i>start-dfield</i> ] 
<a href="attributetypes.html#dfield">
<i> stop-dfield </i>
</a>
<dl>
<dt><dd><p>
If specified, causes segment bars to be rendered rather than
length-based bars.  These are typically used to display ranges
(but should not be confused with <b>proc rangebar</b> which computes
and displays percentiles).<tt> </tt>
Each bar will be drawn from the data value in <i>start-dfield</i> 
to the data value in the <i>stop-dfield</i>.<tt> </tt>
<br>
Example: <tt>segmentfields: 1 3</tt>

</dl>
<p>
<b>errbarfields</b> 
<a href="attributetypes.html#dfield">
<i> errlowfield </i>
</a>
[ <i>errhifield</i> ]
<dl>
<dt><dd><p>
If specified, causes error bars to be rendered rather than
length based bars.  <tt>lenfield</tt> must also be specified.<tt> </tt>
A thin error bar with tails is drawn from the value in <tt>lenfield</tt>,
downward for the distance located in <i>errlowfield</i>, and then
upward for the distance located in <i>errhifield</i>.<tt> </tt>
If <i>errhifield</i> is not given, the error bar is assumed to
be symmetrical.<tt> </tt>
See also <tt>errbarmult</tt>.<tt> </tt>
<br>
Example: <tt>errbarfields:  3</tt>

</dl>
<p>
<b>errbarmult</b>  <i>n</i>
<dl>
<dt><dd><p>
If specified, error bars will be drawn to <i>n</i> times the distance
given in the data.  Useful for drawing error bars showing 2 x standard error.<tt> </tt>

</dl>
<p>
<b>tails</b> <i>n</i>
<dl>
<dt><dd><p>
If specified, tails of length <i>n</i> (in 
<a href="attributetypes.html#positionunits">
 absolute units 
</a>
 ) are 
rendered at the top and bottom of each bar.  Typcially used
with error bars.  Tails of a default length are automatically
rendered if <tt>errbarfields</tt> is used.<tt> </tt>
Example: <tt>tails: 0.2</tt>

</dl>
<p>
<b>leftticfield</b> 
<a href="attributetypes.html#dfield">
<i>dfield</i>
</a>
<p>
<b>midticfield</b> <i>dfield</i>
<p>
<b>rightticfield</b> <i>dfield</i>
<p>
<b>ticlen</b> <i>h</i>
<dl>
<dt><dd><p>
If specified, a left-pointing, centered, or right-pointing tic mark 
will be displayed at the value in <i>dfield</i>.  The tics are drawn
on top of the bars using the current line (outline or thinbarline), beginning
in the center of the bar.<tt> </tt>
Length is set by attribute <tt>ticlen</tt>, which sets the tick length
to <i>h</i>
<a href="attributetypes.html#positionunits">
absolute units
</a>
 .<tt> </tt>

</dl>
<p>
<b>select</b>  
<a href="condex.html">
<i> conditional-expression </i>
</a>
<dl>
<dt><dd><p>
Allows data rows to be selected for inclusion 
using a selection expression.<tt> </tt>

</dl>
<p>
<b>reverseorder</b>  <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If <tt>yes</tt>, and bars are being located in consecutive unit locations
(i.e. no <tt>locfield</tt> specified), bars will be placed in reverse order.<tt> </tt>

</dl>
<p>
<b>colorfield</b>
<a href="attributetypes.html#dfield">
 dfield
</a>
<dl>
<dt><dd><p>
If specified, the color of each individual bar to be controlled by this data field,
using 
<a href="legendentry.html#legenddriven">
 legend-driven technique
</a>
 .<tt> </tt>
An example:
<a href="../gallery/colorfld.htm">
 colorfld
</a>


</dl>
<p>
<b>colorlist</b> <i>list</i>
<dl>
<dt><dd><p>
Allows bars to be rendered in multiple colors.<tt> </tt>
It can operate in one of two ways.<tt> </tt>
<dt><dd><p>
1) if <i>list</i> is a space-separated
list of 
<a href="color.html">
<i>colors</i>
</a>
then the individual bars will be rendered using these colors.<tt> </tt>
<br>
Example: <tt>colorlist: red yellow blue green</tt>
<br>
The leftmost bar will be red, the second yellow, and so on.<tt> </tt>
If there are more bars then given colors,
the remaining bars will be rendered using the default color, e.g.<tt> </tt>
the value given in the <tt>color</tt> attribute.  
A gallery example where this was done is 
<a href="../gallery/timeline1a.htm">
timeline1a
</a>
<dt><dd><p>
2) <i>list</i> may be some number of pairs having the form 
<i>n</i> 
<a href="color.html">
<i> color </i>
</a>
where <i>n</i> is an integer. 
<br>
Example: <tt>colorlist: 4 yellow 8 pink</tt>
<br>
The fourth bar from the left will be yellow; the eighth pink.<tt> </tt>
All other bars will be rendered using the default color, e.g.<tt> </tt>
the value given in the <tt>color</tt> attribute.  
A gallery example where this was done is 
<a href="../gallery/hbars1.htm">
hbars1
</a>
<dt><dd><p>
Any legend entries for the various colors must be
done explicitly using proc legendentry.<tt> </tt>

</dl>
<p>
<b>barwidthfield</b> 
<a href="attributetypes.html#dfield">
<i>dfield</i>
</a>
<dl>
<dt><dd><p>
If specified, bar widths will be controlled by the contents of this field.<tt> </tt>
These values should be in scaled basic units for the axis that the bars are perpendicular to.<tt> </tt>

</dl>
<p>
<b>hidezerobars</b> <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If <tt>yes</tt>, bars that are zero-length will not be drawn at all.<tt> </tt>
Default is <tt>no</tt> (zero length bars may be visible as a thin line).<tt> </tt>

</dl>
<p>
<b>clickmapurl</b> <i>url template</i>
<dl>
<dt><dd><p>
If generating an
<a href="clickmap.html">
 HTML clickmap
</a>
, this specifies a url template.<tt> </tt>
and causes the bar rectangles to be mapped.<tt> </tt>
This attribute usually contains one or more embedded
<a href="attributetypes.html#dfield">
 data field references
</a>
preceded by double at-sign (@@).<tt> </tt>
See
<a href="clickmap.html">
 HTML clickmap
</a>
for more details and examples.<tt> </tt>
<br>
Example: <tt>clickmapurl: http://abc.com/mycgi?category=@@3</tt>

<br><br><br>
</dl>
<h2>BAR LABELING OPTIONS</h2>
<p>
One label may be rendered per bar.  It may be a value label
(<tt>showvalues</tt>), or label taken from a data field.<tt> </tt>

<p>
<b>showvalues</b> <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If <tt>yes</tt>, the plottable Y value will be displayed near the
end of each bar.  Default is <tt>no</tt>.  Text details may be 
controlled using the <tt>labeldetails</tt> attribute (the <tt>adjust</tt>
subattribute may be used to control the location of the labels).<tt> </tt>
Numeric decimal format may be controlled by the <tt>numbersformat</tt>
attribute.<tt> </tt>
Example: <tt>showvalues: yes</tt>

</dl>
<p>
<b>numbersformat</b> 
<a href="attributetypes.html#printfspec">
<i> printfspec </i>
</a>
<dl>
<dt><dd><p>
Allows control over number decimal format presentation in bar labels.<tt> </tt>
Default is <tt>%g</tt>.<tt> </tt>
<br>
Example: <tt>numbersformat: %8.0f</tt>

</dl>
<p>
<b>labelzerovalue</b> <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
Used with <tt>showvalues</tt>.<tt> </tt>
If <tt>yes</tt>, zero length bars will have a value label displayed.<tt> </tt>
Default is <tt>no</tt>, to not display any value for zero length bars.<tt> </tt>


</dl>
<p>
<b>labeldetails</b> 
<a href="textdetails.html">
<i> textdetails </i>
</a>
<dl>
<dt><dd><p>
Details concerning the appearance of the labelling (both end-of-bar
labels and longways labels).<tt> </tt>
Example: <tt>textdetails: adjust=0,-0.3  size=6</tt>

</dl>
<p>
<b>labelword</b> 
<a href="attributetypes.html#text">
<i> text </i>
</a>
<dl>
<dt><dd><p>
Allows the <tt>showvalues</tt> label to be formatted.<tt> </tt>
The symbol <tt>@@N</tt> will be evaluated to the plottable value.<tt> </tt>
May also be used to label bars with a constant.<tt> </tt>
Example: <tt>labelword: N=@@N</tt>

</dl>
<p>
<b>labelfield</b> 
<a href="attributetypes.html#dfield">
<i> dfield </i>
</a>
<dl>
<dt><dd><p>
If specified, the contents of the data field <i>dfield</i> will be used as the label.<tt> </tt>
The text may include embedded <tt>@@N</tt> (see above) and
<tt>\n</tt> to symbolize newlines if longways labels are being done.<tt> </tt>

</dl>
<p>
<b>labelpos</b>
<a href="attributetypes.html#locvalue">
<i> locvalue </i>
</a>
<dl>
<dt><dd><p>
If specified, controls the positioning of the labels.<tt> </tt>
For example, if doing vertical bars, this attribute would
control the vertical placement of bar labels.<tt> </tt>
<br>
Example: <tt>labelpos: min-0.2</tt> 

</dl>
<p>
<b>backbox</b> 
<a href="color.html">
<i> color </i>
</a>
<dl>
<dt><dd><p>
If specified, a backing box of the given <i>color</i> will be 
rendered behind each end-of-bar label (not done for longways labels).  
This may be useful if the labels are hard to see because of bar color.<tt> </tt>

</dl>
<p>
<b>longwayslabel</b> <tt>yes</tt> | <tt>no</tt>
<dl>
<dt><dd><p>
If <tt>yes</tt>, the label will be shown longways along the length of bars,
rather than near the tops.  This may be useful for showing longer labels.<tt> </tt>
Label text may include embedded newlines symbolized by <tt>\n</tt>.<tt> </tt>

<br>
<br>
</td></tr>
<td align=right>
<a href="../doc/Welcome.html">
<img src="../doc/ploticus.gif" border=0></a><br><small>data display engine &nbsp; <br>
<a href="../doc/Copyright.html">Copyright Steve Grubb</a>
<br>
<br>
<center>
<img src="../gallery/all.gif">
</center>
</td></tr>
</table>
</dl>
<p><hr>
Markup created by <em>unroff</em> 1.0,&#160;<tt> </tt>&#160;<tt> </tt>March 01, 2002.
</body>
</html>
